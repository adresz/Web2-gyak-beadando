<!DOCTYPE HTML>
<html lang="hu">

<!-- HEAD (partial) -->
<%- include('partials/head', { 
    title: "Üzenetek – Magyarország Atlasz" 
}) %>
<style>
    span.title { display: none !important; }
</style>

<body class="is-preload">

<div id="page-wrapper">

    <!-- HEADER (partial) -->
    <%- include('partials/header', { active: 'messages' }) %>

    <!-- Main -->
    <div id="main">
        <div class="inner">

            <!-- Page title -->
            <div class="tabla-info">
                <h2>Üzenetek <small>(<%= messages.length %> db)</small></h2>
            </div>

            <!-- Ha nincs üzenet -->
            <% if (messages.length === 0) { %>
                <p class="text-center" style="color: #aaa; font-size: 1.2em; margin: 3em 0;">
                    Még nincs egyetlen üzenet sem.
                </p>
            <% } else { %>

                <!-- Messages table -->
                <div class="table-wrapper">
                    <table class="alt">
                        <thead>
                            <tr>
                                <th>Név</th>
                                <th>Email</th>
                                <th>Város</th>
                                <th>Kor</th>
                                <th>Üzenet</th>
                                <th>Beküldve</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% messages.forEach(msg => { %>
                                <tr>
                                    <td><strong><%= msg.nev %></strong></td>
                                    <td><%= msg.email %></td>
                                    <td><%= msg.varos || '—' %></td>
                                    <td><%= msg.kor ? msg.kor + ' év' : '—' %></td>
                                    <td style="max-width: 300px; word-wrap: break-word;"><%= msg.uzenet %></td>
                                    <td><%= new Date(msg.created_at).toLocaleString('hu-HU') %></td>
                                </tr>
                            <% }) %>
                        </tbody>
                    </table>
                </div>

            <% } %>

        </div>
    </div>

</div>

</body>
</html>