<!DOCTYPE HTML>
<html lang="hu">

<%- include('partials/head', { 
    title: "Város szerkesztése – TigerTravel Admin" 
}) %>
<style>
  span.title { display: none !important; }
</style>

<body class="is-preload">

    <div id="page-wrapper">

        <%- include('partials/header', { active: 'cities' }) %>

        <section id="main" class="wrapper">
            <div class="inner">

                <header class="major special">
                    <h2>Város szerkesztése</h2>
                    <p>ID: <%= record.id %> – <%= record.nev %></p>
                </header>

                <!-- Sikerüzenet -->
                <div id="msg" class="alert alert-success text-center mb-5" style="display:none;"></div>

                <!-- Vissza gomb – tábla fölött, középen -->
                <div class="align-center mb-4">
                    <a href="/crud" class="button icon solid fa-arrow-left" style="margin-bottom: 30px;">
                        Vissza a városokhoz
                    </a>
                </div>

                <!-- Táblázatos űrlap – pontosan ugyanaz a stílus -->
                <div class="table-wrapper" style="max-width: 650px; margin: 0 auto;">
                    <form action="/crud/edit/<%= record.id %>" method="POST">

                        <table class="alt">
                            <tbody>

                                <!-- Város neve -->
                                <tr>
                                    <td style="width:200px; padding: 12px 0;"><label>Város neve</label></td>
                                    <td style="padding: 12px 0;">
                                        <input type="text" name="nev" value="<%= record.nev %>" required 
                                               style="width:80%; margin-left: 10%;" />
                                    </td>
                                </tr>

                                <!-- Megye -->
                                <tr>
                                    <td><label>Megye</label></td>
                                    <td>
                                        <div class="select-wrapper">
                                            <select name="megyeid" required style="width:100%;">
                                                <option value="">– Válassz megyét –</option>
                                                <% megyek.forEach(megye => { %>
                                                    <option value="<%= megye.id %>" 
                                                        <%= record.megyeid == megye.id ? 'selected' : '' %>>
                                                        <%= megye.nev %>
                                                    </option>
                                                <% }) %>
                                            </select>
                                        </div>
                                    </td>
                                </tr>

                                <!-- Megyeszékhely -->
                                <tr>
                                    <td><label>Megyeszékhely?</label></td>
                                    <td>
                                        <ul class="actions fitted">
                                            <li><input type="radio" id="msz0" name="megyeszekhely" value="0" 
                                                       <%= record.megyeszekhely == 0 ? 'checked' : '' %>><label for="msz0">Nem</label></li>
                                            <li><input type="radio" id="msz1" name="megyeszekhely" value="1" 
                                                       <%= record.megyeszekhely == 1 ? 'checked' : '' %>><label for="msz1">Igen</label></li>
                                        </ul>
                                    </td>
                                </tr>

                                <!-- Megyei jogú város -->
                                <tr>
                                    <td><label>Megyei jogú város?</label></td>
                                    <td>
                                        <ul class="actions fitted">
                                            <li><input type="radio" id="mj0" name="megyeijogu" value="0" 
                                                       <%= record.megyeijogu == 0 ? 'checked' : '' %>><label for="mj0">Nem</label></li>
                                            <li><input type="radio" id="mj1" name="megyeijogu" value="1" 
                                                       <%= record.megyeijogu == 1 ? 'checked' : '' %>><label for="mj1">Igen</label></li>
                                        </ul>
                                    </td>
                                </tr>

                            </tbody>
                        </table>

                        <!-- Mentés gomb – ugyanaz a nagy rózsaszín, középen -->
                        <div class="align-center mt-5">
                            <button type="submit"
                                    class="button primary large icon solid fa-save"
                                    style="background:#e91e63; border-color:#c2185b; min-width:250px; padding:10px; min-height:80px;"
                                    onclick="localStorage.setItem('message', 'Város sikeresen módosítva!')">
                                Mentés
                            </button>
                        </div>

                    </form>
                </div>

            </div>
        </section>

    </div>


    <script>
        const msg = localStorage.getItem('message');
        if (msg) {
            const box = document.getElementById('msg');
            box.textContent = msg;
            box.style.display = 'block';
            localStorage.removeItem('message');
            setTimeout(() => {
                box.style.opacity = '0';
                setTimeout(() => box.style.display = 'none', 600);
            }, 4000);
        }
    </script>

</body>
</html>